window.MK||(window.MK={}),function(MK){MK.ajax=function(url,options){var options=options||{},defaultOptions={async:!0,method:"POST",decodeJson:!0,callback:null};MK.extend(options,defaultOptions,!1);var xmlHttp=new XMLHttpRequest;options.callback&&(xmlHttp.onreadystatechange=function(){if(4==xmlHttp.readyState)if(options.decodeJson)try{options.callback(eval(xmlHttp.responseText))}catch(t){console.error(t)}else options.callback(xmlHttp)}),xmlHttp.open(options.method,url,!!options.async),xmlHttp.send(null)},MK.extend=function(t,e,i){for(var n in e)t.hasOwnProperty(n)&&!i||(t[n]=e[n])},MK.draggable=function(){var t=!1,e=this;function i(t,e,i){var n=!0;e.dragStart?!1===e.dragStart(i,t)&&(n=!1):e.strict&&i.target!=t&&(n=!1),n&&(this.draggingElement=t,this.draggingOptions=e)}return window.addEventListener("mouseup",(function(){this.draggingElement=null,this.dragStartMousePos=null,this.dragStartElementPos=null}),!1),function(n,s){s=s||{};MK.extend(s,{constrainToParent:!0,dragX:!0,dragY:!0,drag:null,dragStart:null,strict:!0}),t||(window.addEventListener("mousemove",(function(t){if(this.draggingElement){if(this.draggingOptions.drag&&!1===this.draggingOptions.drag(t,this.draggingElement))return;if(this.dragStartMousePos||(this.dragStartMousePos={x:t.clientX,y:t.clientY},this.dragStartElementPos={x:this.draggingElement.offsetLeft,y:this.draggingElement.offsetTop}),this.draggingOptions.dragX){var e=this.dragStartElementPos.x+(parseInt(t.clientX)-this.dragStartMousePos.x);if(this.draggingOptions.constrainToParent)if(e<0)e=0;else{var i=(this.draggingElement.parentNode.offsetWidth||window.innerWidth)-this.draggingElement.offsetWidth;e>i&&(e=i)}this.draggingElement.style.left=e+"px"}if(this.draggingOptions.dragY){var n=this.dragStartElementPos.y+(parseInt(t.clientY)-this.dragStartMousePos.y);if(this.draggingOptions.constrainToParent)if(n<0)n=0;else{var s=(this.draggingElement.parentNode.offsetHeight||window.innerHeight)-this.draggingElement.offsetHeight;n>s&&(n=s)}this.draggingElement.style.top=n+"px"}this.draggingOptions.drag&&this.draggingOptions.drag(t,this.draggingElement)}}),!1),t=!0),n.addEventListener("mousedown",i.bind(e,n,s))}}(),MK.getAbsolutePosition=function(t){var e={x:0,y:0};do{t.offsetLeft&&(e.x=e.x+parseInt(t.offsetLeft)),t.offsetTop&&(e.y=e.y+parseInt(t.offsetTop)),t=t.parentNode}while(t);return e},MK.timeToSeconds=function(t){var e,i;return(e=t.match(/^(([0-9])+:)?([0-9]+):([0-9]+)$/))?(i=60*parseInt(e[3])+parseInt(e[4]),e[2]&&(i+=60*parseInt(e[2])*60),i):"number"==typeof t||t.match(/^[0-9]+(\.[0-9]+)?$/)?parseInt(t):-1},MK.secondsToTime=function(t){if("number"==typeof t||t.match(/^[0-9]+(\.[0-9]+)?$/)){var e,i,n,s=Math.round(t);s>3600&&(e=Math.floor(s/3600),s%=3600),s>60&&(i=Math.floor(s/60));var a=e>0?e+":":"";return a+=i>0?i+":":"0:",a+=(n=s%60)<10?"0"+n:n}return"string"==typeof t&&t.match(/^(([0-9])+:)?([0-9]+):([0-9]+)$/)?t:null}}(window.MK),window.MK||(window.MK={}),function(t){t.EventRegistry=function(){this.listeners={}},t.extend(t.EventRegistry.prototype,{broadcast:function(t,e){var i,n=0;if(t in this.listeners)for(;i=this.listeners[t][n++];)i(e)},addListener:function(t,e){this.listeners[t]?this.listeners[t].push(e):this.listeners[t]=[e]},removeAllListeners:function(t){t in this.listeners&&(this.listeners[t]=[])},removeListener:function(t,e){t in this.listeners&&-1!=this.listeners[t].indexOf(e)&&this.listeners[t].splice(this.listeners[t].indexOf(e),1)}})}(MK),function(t){t.HtmlBuilder=function(){return t.HtmlBuilderInstance||this!=t||(t.HtmlBuilderInstance=new t.HtmlBuilder),t.HtmlBuilderInstance},t.extend(t.HtmlBuilder.prototype,{build:function(t){var e,i;if(!t.length)return this.buildNode(t);for(;i=t[e++];)(void 0).push(this.buildNode(i))},buildNode:function(t){var e,i=document.createElement(t.n);if("a"in t)for(e in t.a)i.setAttribute(e,t.a[e]);if("h"in t&&(i.innerHTML=t.h),"t"in t&&(document.all?i.innerText=t.t:i.textContent=t.t),"c"in t)for(var n=0;n<t.c.length;n++)i.appendChild(this.buildNode(t.c[n]));if("e"in t)for(event in t.e)i["on"+event]=t.e[event];return i}})}(MK),function(t){t.Player=function(e){this.EVENTS=["play","playing","stop","pause","songAdded","playlistLoaded","volumeChanged","songChanged","repeatStateChanged"],this.PLAYING_STATES={STOPPED:"STOPPED",PLAYING:"PLAYING",PAUSED:"PAUSED"},this.REPEAT_STATES={REPEAT_NONE:"REPEAT_NONE",REPEAT_ONE:"REPEAT_ONE",REPEAT_ALL:"REPEAT_ALL"},this.playlist=[],this.playlistLoadQueue=[],this.playQueue=[],this.currentSong=null,this.playingState=this.PLAYING_STATES.STOPPED,this.repeatState=this.REPEAT_STATES.REPEAT_ALL,this.shuffle=!1,this.volume=1,this.eventRegistry=new t.EventRegistry,this._init()},t.extend(t.Player.prototype,{addSongs:function(t){for(var e,i=0;e=t[i++];)this.addSong(e)},addSong:function(e){return!!t.Song.prototype.isSong(e)&&(this.playlist.push(e),this.eventRegistry.broadcast("songAdded",e),this.playlist.length-1)},play:function(t){if(!this.playlist.length)return!1;void 0===t&&(t=this.getCurrentSongIndex());var e=this.playlist[t];e&&(this.currentSong!=e?(this.audioEngine.src=e.url,this.eventRegistry.broadcast("songChanged",e)):this.playingState!=this.PLAYING_STATES.PAUSED&&(this.audioEngine.currentTime=0),this.currentSong=e,this.playingState=this.PLAYING_STATES.PLAYING,this.audioEngine.play(),this.eventRegistry.broadcast("play",this.currentSong))},stop:function(){this.playingState==this.PLAYING_STATES.PLAYING&&(this.audioEngine.pause(),this.audioEngine.currentTime&&(this.audioEngine.currentTime=0)),this.playingState=this.PLAYING_STATES.STOPPED,this.eventRegistry.broadcast("stop",this.currentSong)},pause:function(){this.audioEngine.pause(),this.playingState=this.PLAYING_STATES.PAUSED,this.eventRegistry.broadcast("pause")},next:function(){if(!this.playlist.length)return!1;if(this.repeatState==this.REPEAT_STATES.REPEAT_ONE)this.play(this.getCurrentSongIndex());else if(this.playQueue.length){var t,e=this.playQueue.shift();(t=this.playlist.indexOf(e))>=0?this.play(t):this.next()}else if(this.shuffle)this.play(Math.round(Math.random()*this.playlist.length));else{var i=this.getCurrentSongIndex()+1;this.playlist[i]?this.play(i):this.repeatState==this.REPEAT_STATES.REPEAT_ALL&&this.play(0)}},previous:function(){if(!this.playlist.length)return!1;if(this.repeatState==this.REPEAT_STATES.REPEAT_ONE)this.play(this.getCurrentSongIndex());else if(this.playQueue.length){var t,e=this.playQueue.shift();(t=this.playlist.indexOf(e))>=0?this.play(t):this.previous()}else if(this.shuffle)this.play(Math.round(Math.random()*this.playlist.length));else{var i=this.getCurrentSongIndex()-1;this.playlist[i]?this.play(i):this.repeatState==this.REPEAT_STATES.REPEAT_ALL&&this.play(this.playlist.length-1)}},setVolume:function(t){NaN===(t=parseFloat(t))&&(t=1),t<0?t=0:t>1&&(t=1),this.volume=t,this.audioEngine.volume=this.volume,this.eventRegistry.broadcast("volumeChanged",this.volume)},seek:function(t){this.audioEngine.currentTime=t>=0?t:0},getCurrentSongIndex:function(){var t=this.playlist.indexOf(this.currentSong);return t>=0?t:0},appendPlaylist:function(e){t.ajax(e,{callback:this._doAppendPlaylist.bind(this)})},loadPlaylist:function(t){this.playlist=[],this.appendPlaylist(t)},setRepeatState:function(t){t in this.REPEAT_STATES&&(this.repeatState=t,this.eventRegistry.broadcast("repeatStateChanged",this.repeatState))},addEventListener:function(t,e){this.EVENTS.indexOf(t)>-1?this.eventRegistry.addListener(t,e):console.log("Can't add an event listener to the unknown event: "+t)},_init:function(){this.audioEngine=document.createElement("audio"),this.audioEngine.volume=this.volume,this.audioEngine.addEventListener("ended",this._onSongEnded.bind(this)),this._broadcastPlayingEvent()},_broadcastPlayingEvent:function(){this.playingState==this.PLAYING_STATES.PLAYING&&this.eventRegistry.broadcast("playing",{song:this.currentSong,currentTime:this.audioEngine.currentTime}),setTimeout(this._broadcastPlayingEvent.bind(this),250)},_doAppendPlaylist:function(t){for(var e,i=0;e=t[i++];)this.playlistLoadQueue.push(e);this._loadSongsFromQueue()},_loadSongsFromQueue:function(){if(this.playlistLoadQueue.length){for(var e,i=this.playlistLoadQueue.splice(0,1e4),n=[],s=0;e=i[s++];)t.timeToSeconds(e.length)>0&&n.push(new t.Song(e));this.addSongs(n)}this.playlistLoadQueue.length?setTimeout(this._loadSongsFromQueue.bind(this),100):this.eventRegistry.broadcast("playlistLoaded")},_onSongEnded:function(){this.playingState=this.PLAYING_STATES.STOPPED,this.next()}})}(MK),function(t){t.Song=function(e){return this.url=null,this.title=null,this.artist=null,this.album=null,this.length=null,"object"!=typeof e?(console.error("The attributes parameter to create a Song needs to be an object"),null):(t.extend(this,e,!0),this.url?void(this.length=t.timeToSeconds(this.length)):(console.error("A song always needs to have a url"),null))},t.extend(t.Song.prototype,{isSong:function(e){return"object"==typeof e&&e.constructor.prototype==t.Song.prototype},getFullName:function(){var t="";return this.artist&&(t+=this.artist+" - "),this.album&&(t+=this.album+" - "),this.title&&(t+=this.title),t.replace(/ - $/,"")},getLength:function(){return this.length}})}(MK),function(t){t.BaseSkin=function(t){this.player=t,this.mainWindow=null,this.mainWindowArtistLabel=null,this.mainWindowTitleLabel=null,this.mainWindowAlbumLabel=null,this.playlistWindow=null,this.playlistWindowContent=null,this.playlistWindow=null,this.playButton=null,this.repeatButton=null,this.shuffleButton=null,this.seeker=null,this.volumeSlider=null,this.currentTimeLabel=null,this.totalTimeLabel=null},t.extend(t.BaseSkin.prototype,{init:function(){this.createWindows(),this.initializeElements(),this._disableElementSelection(),this.registerEvents(),this.redrawPlaylist()},createWindows:function(){this.mainWindow=this.createMainWindow(),document.body.appendChild(this.mainWindow),this.playlistWindow=this.createPlaylistWindow(),document.body.appendChild(this.playlistWindow)},initializeElements:function(){this.mainWindowArtistLabel=this.mainWindow.getElementsByClassName("artist")[0],this.mainWindowTitleLabel=this.mainWindow.getElementsByClassName("title")[0],this.mainWindowAlbumLabel=this.mainWindow.getElementsByClassName("album")[0],this.playButton=this.mainWindow.getElementsByClassName("play")[0],this.repeatButton=this.mainWindow.getElementsByClassName("repeat")[0],this.shuffleButton=this.mainWindow.getElementsByClassName("shuffle")[0],this.seeker=this.mainWindow.getElementsByClassName("seek")[0],this.volumeSlider=this.mainWindow.getElementsByClassName("volumeSlider")[0],this.currentTimeLabel=this.mainWindow.getElementsByClassName("currentTime")[0],this.totalTimeLabel=this.mainWindow.getElementsByClassName("totalTime")[0],this.playlistWindowContent=this.playlistWindow.getElementsByTagName("table")[0],this.volumeSlider.value=this.player.volume,this.styleRepeatButton(),this.styleShuffleButton()},createMainWindow:function(){return t.HtmlBuilder().build({n:"div",a:{class:"window main"},c:[{n:"div",a:{class:"header"},c:[{n:"div",a:{class:"minimize"}}]},{n:"div",a:{class:"body-left"}},{n:"div",a:{class:"body-content"},c:[{n:"div",a:{class:"label"},t:"Title"},{n:"div",a:{class:"title"},t:String.fromCharCode(160)},{n:"div",a:{class:"label"},t:"Artist"},{n:"div",a:{class:"artist"},t:String.fromCharCode(160)},{n:"div",a:{class:"label"},t:"Album"},{n:"div",a:{class:"album"},t:String.fromCharCode(160)},{n:"div",a:{class:"progress"},c:[{n:"div",a:{class:"currentTime"},t:"0:00"},{n:"input",a:{type:"range",value:0,min:0,max:100,step:.1,class:"seek"},e:{change:this.seek.bind(this)}},{n:"div",a:{class:"totalTime"},t:"0:00"}]},{n:"input",a:{type:"range",value:1,min:0,max:1,step:.05,class:"volumeSlider"},e:{change:this.changeVolume.bind(this)}},{n:"div",a:{class:"controls"},c:[{n:"div",a:{class:"button previous"},t:"Previous",e:{click:this.clickPrevious.bind(this)}},{n:"div",a:{class:"button play"},t:"Play",e:{click:this.clickPlay.bind(this)}},{n:"div",a:{class:"button pause"},t:"Pause",e:{click:this.player.pause.bind(this.player)}},{n:"div",a:{class:"button stop"},t:"Stop",e:{click:this.player.stop.bind(this.player)}},{n:"div",a:{class:"button next"},t:"Next",e:{click:this.clickNext.bind(this)}},{n:"div",a:{class:"button repeat"},t:"Repeat",e:{click:this.clickRepeat.bind(this)}},{n:"div",a:{class:"button shuffle"},t:"Shuffle",e:{click:this.clickShuffle.bind(this)}}]}]},{n:"div",a:{class:"body-right"}},{n:"div",a:{class:"footer"}}]})},createPlaylistWindow:function(){return t.HtmlBuilder().build({n:"div",a:{class:"window playlist"},c:[{n:"div",a:{class:"header",c:[{n:"div",a:{class:"minimize"}}]}},{n:"div",a:{class:"body-left"}},{n:"div",a:{class:"body-content"},e:{click:this.clickSong.bind(this)},c:[{n:"table",a:{cellSpacing:0}}]},{n:"div",a:{class:"body-right"}},{n:"div",a:{class:"footer"}}]})},createSongRow:function(e,i){return t.HtmlBuilder().build({n:"tr",a:{row:i-1},c:[{n:"td",a:{class:"r"},t:i+"."},{n:"td",a:{class:"n"},t:e.getFullName()},{n:"td",a:{class:"d"},t:t.secondsToTime(e.getLength())}]})},registerEvents:function(){this.player.addEventListener("play",this.playerOnPlay.bind(this)),this.player.addEventListener("stop",this.playerOnStop.bind(this)),this.player.addEventListener("playing",this.playerOnPlaying.bind(this)),this.player.addEventListener("playlistLoaded",this.playerOnPlaylistLoaded.bind(this)),this.player.addEventListener("volumeChanged",this.playerOnVolumeChanged.bind(this)),this.player.addEventListener("songChanged",this.playerOnSongChanged.bind(this))},playerOnSongChanged:function(e){this.mainWindowArtistLabel.innerHTML=e.artist||"&nbsp;",this.mainWindowAlbumLabel.innerHTML=e.album||"&nbsp;",this.mainWindowTitleLabel.innerHTML=e.title||"&nbsp;",this.seeker.max=e.getLength(),this.seeker.value=0,this.totalTimeLabel.innerHTML=t.secondsToTime(e.length),this.stylePlayButton()},playerOnPlay:function(t){this.selectRow(this.player.playlist.indexOf(t)),this.stylePlayButton()},playerOnStop:function(){this.seeker.value=0,this.currentTimeLabel.innerHTML="0:00",this.stylePlayButton()},playerOnPlaying:function(e){this.seeker.value=e.currentTime,this.currentTimeLabel.innerHTML=t.secondsToTime(e.currentTime)},playerOnPlaylistLoaded:function(){this.redrawPlaylist()},playerOnVolumeChanged:function(t){this.volumeSlider.value=t},redrawPlaylist:function(){this.playlistWindowContent.innerHTML="";for(var e,i=t.HtmlBuilder().build({n:"table",a:{cellSpacing:0}}),n=0;e=this.player.playlist[n++];)i.appendChild(this.createSongRow(e,n));this.playlistWindowContent.parentNode&&this.playlistWindowContent.parentNode.removeChild(this.playlistWindowContent),this.playlistWindow.getElementsByClassName("body-content")[0].appendChild(i),this.playlistWindowContent=i},selectRow:function(t,e){e||(e=this.playlistWindowContent.childNodes[t]),this.currentPlayingTableRow&&(this.currentPlayingTableRow.className=this.currentPlayingTableRow.className.replace(/\s*currentlyPlaying/,"")),e.className=(e.className+" currentlyPlaying").trim(),this.currentPlayingTableRow=e},clickSong:function(t){for(var e=t.target;e&&"TR"!=e.nodeName;)e=e.parentElement;return this.seeker.value=0,this.selectRow(e.getAttribute("row"),e),this.player.play(e.getAttribute("row")),!1},clickPlay:function(){this.player.play(),this.stylePlayButton()},clickRepeat:function(t){this.player.repeatState==this.player.REPEAT_STATES.REPEAT_NONE?this.player.setRepeatState(this.player.REPEAT_STATES.REPEAT_ALL):this.player.repeatState==this.player.REPEAT_STATES.REPEAT_ALL?this.player.setRepeatState(this.player.REPEAT_STATES.REPEAT_ONE):this.player.setRepeatState(this.player.REPEAT_STATES.REPEAT_NONE),this.styleRepeatButton()},clickShuffle:function(t){this.player.shuffle=!this.player.shuffle,this.styleShuffleButton()},clickNext:function(){this.seeker.value=0,this.player.next(),this.ensureCurrentSongIsVisible()},clickPrevious:function(){this.seeker.value=0,this.player.previous(),this.ensureCurrentSongIsVisible()},clickSeekBackward:function(){this.player.seek(this.player.audioEngine.currentTime-5)},clickSeekForward:function(){this.player.seek(this.player.audioEngine.currentTime+5)},seek:function(t){this.player.seek(t.target.value)},changeVolume:function(t){this.player.setVolume(t.target.value)},ensureCurrentSongIsVisible:function(){var t=parseInt(this.playlistWindowContent.parentNode.scrollTop),e=this.playlistWindowContent.parentNode.offsetHeight,i=this.currentPlayingTableRow.offsetTop;i<t+40?this.playlistWindowContent.parentNode.scrollTop=i-50:i>t+e-50&&(this.playlistWindowContent.parentNode.scrollTop=i-e+60)},styleRepeatButton:function(){this.player.repeatState==this.player.REPEAT_STATES.REPEAT_ALL?this.repeatButton.innerHTML="Repeat: all":this.player.repeatState==this.player.REPEAT_STATES.REPEAT_NONE?this.repeatButton.innerHTML="Repeat: none":this.player.repeatState==this.player.REPEAT_STATES.REPEAT_ONE&&(this.repeatButton.innerHTML="Repeat: one")},styleShuffleButton:function(){this.player.shuffle?this.shuffleButton.innerHTML="Shuffle: on":this.shuffleButton.innerHTML="Shuffle: off"},stylePlayButton:function(){},_disableElementSelection:function(){document.onselectstart=function(){return!1}}})}(MK),function(t){t.FancySkin=function(t){this.player=t,this.scroller=null},t.FancySkin.prototype=new t.BaseSkin,t.extend(t.FancySkin.prototype,{initializeElements:function(){t.BaseSkin.prototype.initializeElements.call(this),this._initializeScrollbar(),this._makeResizable()},_initializeScrollbar:function(){this.scroller=this.playlistWindow.getElementsByClassName("scroller")[0],t.draggable(this.scroller,{dragX:!1,drag:this.handleScrollerDrag.bind(this)}),t.draggable(this.playlistWindow,{strict:!1,dragStart:this.handlePlaylistWindowMoveStart.bind(this)}),t.draggable(this.mainWindow,{strict:!0}),this.playlistWindowContent.parentNode.addEventListener("scroll",this.handlePlaylistWindowScroll.bind(this))},_makeResizable:function(){t.draggable(this.playlistWindow.getElementsByClassName("footer-right")[0],{drag:this.handlePlaylistResize.bind(this)}),t.draggable(this.playlistWindow.getElementsByClassName("body-right")[0],{drag:this.handlePlaylistResize.bind(this)}),t.draggable(this.playlistWindow.getElementsByClassName("footer-stretch")[0],{drag:this.handlePlaylistResize.bind(this)})},createMainWindow:function(){return t.HtmlBuilder().build({n:"div",a:{class:"window main"},c:[{n:"div",a:{class:"header"},c:[{n:"div",a:{class:"minimize"}}]},{n:"div",a:{class:"body-left"}},{n:"div",a:{class:"body-content"},c:[{n:"div",a:{class:"title"},h:"&nbsp;"},{n:"div",a:{class:"artist"},h:"&nbsp;"},{n:"div",a:{class:"album"},h:"&nbsp;"},{n:"div",a:{class:"progress"},c:[{n:"div",a:{class:"currentTime"},t:"0:00"},{n:"input",a:{type:"range",value:0,min:0,max:100,step:.1,class:"seek"},e:{change:this.seek.bind(this)}},{n:"div",a:{class:"totalTime"},t:"0:00"}]},{n:"div",a:{class:"controls"},c:[{n:"div",a:{class:"button previous"},e:{click:this.clickPrevious.bind(this)}},{n:"div",a:{class:"button seek-backward"},e:{mousedown:this.clickSeekBackward.bind(this)}},{n:"div",a:{class:"button play"},e:{click:this.clickPlay.bind(this)}},{n:"div",a:{class:"button seek-forward"},e:{mousedown:this.clickSeekForward.bind(this)}},{n:"div",a:{class:"button next"},e:{click:this.clickNext.bind(this)}},{n:"div",a:{class:"button volume"},c:[{n:"input",a:{type:"range",value:1,min:0,max:1,step:.05,class:"volumeSlider"},e:{change:this.changeVolume.bind(this)}}]},{n:"div",a:{class:"button repeat"},e:{click:this.clickRepeat.bind(this)}},{n:"div",a:{class:"button shuffle"},e:{click:this.clickShuffle.bind(this)}}]}]},{n:"div",a:{class:"body-right"}},{n:"div",a:{class:"footer"}}]})},createPlaylistWindow:function(){return t.HtmlBuilder().build({n:"div",a:{class:"window playlist"},c:[{n:"div",a:{class:"header"},c:[{n:"div",a:{class:"header-stretch"}},{n:"div",a:{class:"header-left"}},{n:"div",a:{class:"header-right"}}]},{n:"div",a:{class:"body"},c:[{n:"div",a:{class:"body-left"}},{n:"div",a:{class:"body-content"},e:{click:this.clickSong.bind(this)},c:[{n:"table",a:{cellSpacing:0}}]},{n:"div",a:{class:"body-right"},c:[{n:"div",a:{class:"scroller"}}]}]},{n:"div",a:{class:"footer"},c:[{n:"div",a:{class:"footer-stretch"}},{n:"div",a:{class:"footer-left"}},{n:"div",a:{class:"footer-right"}}]}]})},stylePlayButton:function(){this.player.playingState==this.player.PLAYING_STATES.PLAYING?this.playButton.className=this.playButton.className.replace(" play"," pause"):this.playButton.className=this.playButton.className.replace(" pause"," play")},styleRepeatButton:function(){this.player.repeatState==this.player.REPEAT_STATES.REPEAT_ALL?this.repeatButton.className="button repeat all":this.player.repeatState==this.player.REPEAT_STATES.REPEAT_ONE?this.repeatButton.className="button repeat one":this.repeatButton.className="button repeat none"},styleShuffleButton:function(){this.player.shuffle?this.shuffleButton.className="button shuffle on":this.shuffleButton.className="button shuffle off"},clickPlay:function(){this.player.playingState==player.PLAYING_STATES.PLAYING?this.player.pause():this.player.play(),this.stylePlayButton()},redrawPlaylist:function(){t.BaseSkin.prototype.redrawPlaylist.call(this),this.handlePlaylistWindowScroll()},handleScrollerDrag:function(){var t=this.scroller.offsetTop/(this.scroller.parentNode.offsetHeight-this.scroller.offsetHeight),e=this.playlistWindowContent.offsetHeight;this.playlistWindowContent.parentNode.scrollTop=e*t},handlePlaylistWindowScroll:function(){var t=this.playlistWindowContent.parentNode.scrollTop/(this.playlistWindowContent.offsetHeight-this.playlistWindowContent.parentNode.offsetHeight),e=this.scroller.parentNode.offsetHeight-this.scroller.offsetHeight;this.scroller.style.top=Math.round(e*t)+"px"},handlePlaylistWindowMoveStart:function(e){for(var i=["body-left","header-left","header-stretch"],n=0;n<i.length;n++){var s=this.playlistWindow.getElementsByClassName(i[n])[0],a=t.getAbsolutePosition(s),l=e.clientX>a.x&&e.clientX<a.x+s.offsetWidth,o=e.clientY>a.y&&e.clientY<a.y+s.offsetHeight;if(l&&o)return!0}return!1},handlePlaylistResize:function(e,i){var n=t.getAbsolutePosition(this.playlistWindow),s=e.clientX,a=e.clientY;if(!i.className.match(/footer-stretch/)){var l=s-n.x;l>200&&(this.playlistWindow.style.width=l+"px")}if(!i.className.match(/body-right/)){var o=a-n.y;o>100&&(this.playlistWindow.style.height=o+"px"),this.handlePlaylistWindowScroll()}return!1},seek:function(t){this.player.seek(t.target.value)}})}(MK);
